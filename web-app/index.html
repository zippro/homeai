<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HomeAI Web</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="top-header">
        <div class="brand-block">
          <p class="brand-kicker">HomeAI</p>
          <h1>Web Studio</h1>
          <p class="brand-subtitle">Single account across iOS, Android, and Web.</p>
        </div>
        <div class="connection-block">
          <label>
            API Base URL
            <input id="apiBaseUrl" type="url" placeholder="http://localhost:8000" />
          </label>
          <label>
            User ID
            <input id="userId" type="text" placeholder="homeai_demo_user" />
          </label>
          <div class="header-actions">
            <button id="loginButton" type="button" class="btn btn-primary">Login (Dev)</button>
            <button id="logoutButton" type="button" class="btn">Logout</button>
            <button id="refreshButton" type="button" class="btn">Refresh</button>
          </div>
          <div class="status-row">
            <p id="authState" class="pill">Auth: logged out</p>
            <p id="creditState" class="pill">Credits: -</p>
            <p id="planState" class="pill">Plan: -</p>
          </div>
        </div>
      </header>

      <nav class="tabbar">
        <button type="button" class="tab-btn active" data-tab="tools">Tools</button>
        <button type="button" class="tab-btn" data-tab="create">Create</button>
        <button type="button" class="tab-btn" data-tab="discover">Discover</button>
        <button type="button" class="tab-btn" data-tab="profile">My Profile</button>
      </nav>

      <main>
        <section id="panel-tools" class="panel active">
          <div class="hero-card">
            <div class="hero-images">
              <img src="https://picsum.photos/id/1068/1200/800" alt="Before interior" />
              <img src="https://picsum.photos/id/1074/1200/800" alt="After interior" />
            </div>
            <div class="hero-copy">
              <h2>Design With AI Tools</h2>
              <p>
                Upload a room image, pick a style, and generate previews/finals with provider routing
                controlled from your dashboard.
              </p>
            </div>
          </div>

          <div class="section-head">
            <h3>Tool Presets</h3>
            <p>Tap a preset to jump into Create with prefilled style and operation.</p>
          </div>
          <div id="toolsGrid" class="tool-grid"></div>

          <div class="section-head">
            <h3>Your Board</h3>
            <p>Generated projects tied to your account.</p>
          </div>
          <div id="boardGrid" class="board-grid"></div>
          <p id="boardEmpty" class="empty-text hidden">No board items yet. Run your first generation in Create.</p>
        </section>

        <section id="panel-create" class="panel">
          <div class="section-head">
            <h2>Create</h2>
            <p>Render job requests flow through the same backend as iOS and Android.</p>
          </div>

          <form id="renderForm" class="form-grid">
            <label class="field-span-2">
              Image URL
              <input id="imageUrl" type="url" required placeholder="https://..." />
            </label>
            <label>
              Project ID
              <input id="projectId" type="text" placeholder="auto generated if empty" />
            </label>
            <label>
              Style ID
              <input id="styleId" type="text" required value="modern" />
            </label>
            <label>
              Operation
              <select id="operation">
                <option value="restyle">restyle</option>
                <option value="replace">replace</option>
                <option value="remove">remove</option>
                <option value="repaint">repaint</option>
              </select>
            </label>
            <label>
              Tier
              <select id="tier">
                <option value="preview">preview</option>
                <option value="final">final</option>
              </select>
            </label>
            <fieldset class="field-span-2">
              <legend>Target Parts</legend>
              <div class="checkbox-row">
                <label><input type="checkbox" name="targetPart" value="full_room" checked /> full_room</label>
                <label><input type="checkbox" name="targetPart" value="walls" /> walls</label>
                <label><input type="checkbox" name="targetPart" value="floor" /> floor</label>
                <label><input type="checkbox" name="targetPart" value="furniture" /> furniture</label>
                <label><input type="checkbox" name="targetPart" value="decor" /> decor</label>
              </div>
            </fieldset>
            <label class="field-span-2">
              Prompt Overrides JSON (optional)
              <textarea id="promptOverrides" rows="4" placeholder='{"lighting":"golden hour"}'></textarea>
            </label>
            <div class="action-row field-span-2">
              <button id="renderSubmit" type="submit" class="btn btn-primary">Start Render Job</button>
              <button id="loadDemoImage" type="button" class="btn">Use Demo Image</button>
            </div>
          </form>

          <div id="jobResult" class="job-card">
            <p class="muted">No render job yet.</p>
          </div>
        </section>

        <section id="panel-discover" class="panel">
          <div class="section-head">
            <h2>Discover</h2>
            <p>Inspiration feed with categories synced from API.</p>
          </div>
          <div id="discoverTabs" class="discover-tabs"></div>
          <div id="discoverSections" class="discover-sections"></div>
        </section>

        <section id="panel-profile" class="panel">
          <div class="section-head">
            <h2>My Profile</h2>
            <p>Credits, entitlement, and checkout for web subscriptions.</p>
          </div>
          <div id="profileSummary" class="profile-summary"></div>

          <div class="section-head">
            <h3>Active Plan Catalog</h3>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Plan</th>
                  <th>Credits/Day</th>
                  <th>Preview</th>
                  <th>Final</th>
                  <th>Price</th>
                </tr>
              </thead>
              <tbody id="catalogTableBody"></tbody>
            </table>
          </div>

          <form id="checkoutForm" class="form-grid">
            <label>
              Checkout Plan
              <select id="checkoutPlanId"></select>
            </label>
            <label>
              Success URL
              <input id="successUrl" type="url" />
            </label>
            <label class="field-span-2">
              Cancel URL
              <input id="cancelUrl" type="url" />
            </label>
            <div class="action-row field-span-2">
              <button id="checkoutButton" type="submit" class="btn btn-accent">Start Web Checkout</button>
            </div>
          </form>
        </section>
      </main>

      <section class="log-card">
        <h4>Activity Log</h4>
        <pre id="activityLog">Waiting for actions...</pre>
      </section>
    </div>
    <script src="./app.js" type="module"></script>
  </body>
</html>
