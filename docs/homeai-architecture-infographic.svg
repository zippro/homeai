<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="2300" viewBox="0 0 1600 2300" role="img" aria-labelledby="title desc">
  <title id="title">HomeAI Architecture and Technology Infographic</title>
  <desc id="desc">Infographic showing system architecture, technology stack, admin panel modules, and render flow.</desc>

  <defs>
    <linearGradient id="bgGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#f8fbff"/>
      <stop offset="60%" stop-color="#eef4ff"/>
      <stop offset="100%" stop-color="#f4fff8"/>
    </linearGradient>
    <linearGradient id="headerGrad" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#14386b"/>
      <stop offset="100%" stop-color="#1f6ab3"/>
    </linearGradient>
    <linearGradient id="cardGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#ffffff"/>
      <stop offset="100%" stop-color="#f8fbff"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="8" stdDeviation="8" flood-color="#1f2f4f" flood-opacity="0.15"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0,0 10,4 0,8" fill="#3b4f75"/>
    </marker>
    <style>
      .title { font: 700 56px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #ffffff; }
      .subtitle { font: 500 24px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #d9e8ff; }
      .section-title { font: 700 34px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #122645; }
      .section-note { font: 500 19px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #415777; }
      .chip-text { font: 700 20px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #0f2b4a; }
      .node-title { font: 700 20px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #112948; }
      .node-sub { font: 500 16px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #39506e; }
      .stack-head { font: 700 24px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #13335b; }
      .stack-line { font: 500 18px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #314a68; }
      .module-text { font: 600 19px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #1b3558; }
      .flow-step { font: 700 18px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #ffffff; }
      .flow-text { font: 600 18px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #274766; }
      .foot { font: 500 16px "Avenir Next", "Segoe UI", Arial, sans-serif; fill: #5f7290; }
    </style>
  </defs>

  <rect x="0" y="0" width="1600" height="2300" fill="url(#bgGrad)"/>
  <circle cx="140" cy="180" r="160" fill="#dce9ff" opacity="0.45"/>
  <circle cx="1490" cy="190" r="190" fill="#d8fff0" opacity="0.35"/>
  <circle cx="1450" cy="2200" r="240" fill="#d9e7ff" opacity="0.35"/>

  <!-- Header -->
  <rect x="60" y="40" width="1480" height="240" rx="26" fill="url(#headerGrad)" filter="url(#shadow)"/>
  <text x="110" y="136" class="title">HomeAI Architecture Brief</text>
  <text x="110" y="182" class="subtitle">iOS + Android + FastAPI + Admin Panel (Single System View)</text>
  <text x="110" y="222" class="subtitle">Dynamic provider routing, plan controls, and auditable configuration</text>

  <rect x="1060" y="86" width="420" height="56" rx="28" fill="#e8f2ff"/>
  <text x="1270" y="122" text-anchor="middle" class="chip-text">Production-Ready Structure</text>
  <rect x="1060" y="160" width="420" height="56" rx="28" fill="#dff8ef"/>
  <text x="1270" y="196" text-anchor="middle" class="chip-text">Provider-Flexible Backend</text>

  <!-- Section 1: Architecture -->
  <rect x="60" y="320" width="1480" height="860" rx="24" fill="url(#cardGrad)" stroke="#d6e2f5" stroke-width="2" filter="url(#shadow)"/>
  <text x="100" y="385" class="section-title">1. High-Level System Architecture</text>
  <text x="100" y="420" class="section-note">All clients hit one backend, while provider, plan, and variable behavior is controlled from Admin.</text>

  <!-- Top clients -->
  <rect x="130" y="470" width="280" height="96" rx="18" fill="#ffe7e2" stroke="#f2b9ac" stroke-width="2"/>
  <text x="270" y="510" text-anchor="middle" class="node-title">iOS App</text>
  <text x="270" y="537" text-anchor="middle" class="node-sub">SwiftUI + URLSession</text>

  <rect x="450" y="470" width="280" height="96" rx="18" fill="#ffe7e2" stroke="#f2b9ac" stroke-width="2"/>
  <text x="590" y="510" text-anchor="middle" class="node-title">Android App</text>
  <text x="590" y="537" text-anchor="middle" class="node-sub">Kotlin + Jetpack Compose</text>

  <rect x="770" y="470" width="280" height="96" rx="18" fill="#ffe7e2" stroke="#f2b9ac" stroke-width="2"/>
  <text x="910" y="510" text-anchor="middle" class="node-title">Admin Dashboard</text>
  <text x="910" y="537" text-anchor="middle" class="node-sub">HTML + CSS + JavaScript</text>

  <!-- Backend core -->
  <rect x="430" y="620" width="740" height="126" rx="20" fill="#e8f0ff" stroke="#adc4ef" stroke-width="2"/>
  <text x="800" y="675" text-anchor="middle" class="node-title">FastAPI Backend API</text>
  <text x="800" y="705" text-anchor="middle" class="node-sub">Auth, Render Orchestration, Credits, Subscriptions, Analytics, Config</text>

  <!-- Domain blocks -->
  <rect x="150" y="810" width="240" height="108" rx="16" fill="#eef7ff" stroke="#bfd6f5" stroke-width="2"/>
  <text x="270" y="860" text-anchor="middle" class="node-title">Auth Layer</text>
  <text x="270" y="885" text-anchor="middle" class="node-sub">Session + scope checks</text>

  <rect x="420" y="810" width="240" height="108" rx="16" fill="#eef7ff" stroke="#bfd6f5" stroke-width="2"/>
  <text x="540" y="860" text-anchor="middle" class="node-title">Config Service</text>
  <text x="540" y="885" text-anchor="middle" class="node-sub">Bootstrap + variables</text>

  <rect x="690" y="810" width="240" height="108" rx="16" fill="#eef7ff" stroke="#bfd6f5" stroke-width="2"/>
  <text x="810" y="860" text-anchor="middle" class="node-title">Render Orchestrator</text>
  <text x="810" y="885" text-anchor="middle" class="node-sub">Routing + fallback</text>

  <rect x="960" y="810" width="240" height="108" rx="16" fill="#eef7ff" stroke="#bfd6f5" stroke-width="2"/>
  <text x="1080" y="860" text-anchor="middle" class="node-title">Billing Logic</text>
  <text x="1080" y="885" text-anchor="middle" class="node-sub">Credits + entitlement</text>

  <rect x="1230" y="810" width="240" height="108" rx="16" fill="#eef7ff" stroke="#bfd6f5" stroke-width="2"/>
  <text x="1350" y="860" text-anchor="middle" class="node-title">Analytics</text>
  <text x="1350" y="885" text-anchor="middle" class="node-sub">Events + provider health</text>

  <!-- External resources -->
  <rect x="180" y="980" width="250" height="108" rx="16" fill="#eafaf3" stroke="#a8e3c7" stroke-width="2"/>
  <text x="305" y="1030" text-anchor="middle" class="node-title">fal.ai Adapter</text>
  <text x="305" y="1055" text-anchor="middle" class="node-sub">Queue submit/status</text>

  <rect x="480" y="980" width="250" height="108" rx="16" fill="#eafaf3" stroke="#a8e3c7" stroke-width="2"/>
  <text x="605" y="1030" text-anchor="middle" class="node-title">OpenAI Adapter</text>
  <text x="605" y="1055" text-anchor="middle" class="node-sub">Images + b64 handling</text>

  <rect x="780" y="980" width="250" height="108" rx="16" fill="#eafaf3" stroke="#a8e3c7" stroke-width="2"/>
  <text x="905" y="1030" text-anchor="middle" class="node-title">Object Storage</text>
  <text x="905" y="1055" text-anchor="middle" class="node-sub">S3-compatible upload</text>

  <rect x="1080" y="980" width="330" height="108" rx="16" fill="#fff6ea" stroke="#f0c68d" stroke-width="2"/>
  <text x="1245" y="1030" text-anchor="middle" class="node-title">SQLAlchemy Persistence</text>
  <text x="1245" y="1055" text-anchor="middle" class="node-sub">SQLite default, Postgres-ready</text>

  <!-- Arrows -->
  <line x1="270" y1="566" x2="620" y2="620" stroke="#3b4f75" stroke-width="3" marker-end="url(#arrow)"/>
  <line x1="590" y1="566" x2="760" y2="620" stroke="#3b4f75" stroke-width="3" marker-end="url(#arrow)"/>
  <line x1="910" y1="566" x2="900" y2="620" stroke="#3b4f75" stroke-width="3" marker-end="url(#arrow)"/>

  <line x1="800" y1="746" x2="270" y2="810" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="800" y1="746" x2="540" y2="810" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="800" y1="746" x2="810" y2="810" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="800" y1="746" x2="1080" y2="810" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="800" y1="746" x2="1350" y2="810" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>

  <line x1="810" y1="918" x2="305" y2="980" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="810" y1="918" x2="605" y2="980" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="605" y1="1088" x2="905" y2="1088" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="810" y1="918" x2="1245" y2="980" stroke="#3b4f75" stroke-width="2.5" marker-end="url(#arrow)"/>

  <!-- Section 2: Technology Stack -->
  <rect x="60" y="1220" width="1480" height="520" rx="24" fill="url(#cardGrad)" stroke="#d6e2f5" stroke-width="2" filter="url(#shadow)"/>
  <text x="100" y="1285" class="section-title">2. Technology Stack (Used in This Repository)</text>

  <rect x="100" y="1330" width="450" height="170" rx="16" fill="#f3f8ff" stroke="#c9daf5" stroke-width="2"/>
  <text x="130" y="1370" class="stack-head">Backend API</text>
  <text x="130" y="1404" class="stack-line">Python, FastAPI, Pydantic, SQLAlchemy</text>
  <text x="130" y="1434" class="stack-line">Uvicorn, httpx, boto3</text>
  <text x="130" y="1464" class="stack-line">Domain routes under /v1/*</text>

  <rect x="575" y="1330" width="450" height="170" rx="16" fill="#f3f8ff" stroke="#c9daf5" stroke-width="2"/>
  <text x="605" y="1370" class="stack-head">Admin Panel</text>
  <text x="605" y="1404" class="stack-line">Single-page HTML + CSS + JavaScript</text>
  <text x="605" y="1434" class="stack-line">Direct calls to /v1/admin/* endpoints</text>
  <text x="605" y="1464" class="stack-line">Vercel deployment config included</text>

  <rect x="1050" y="1330" width="450" height="170" rx="16" fill="#f3f8ff" stroke="#c9daf5" stroke-width="2"/>
  <text x="1080" y="1370" class="stack-head">iOS App</text>
  <text x="1080" y="1404" class="stack-line">SwiftUI app scaffold with 4 tabs</text>
  <text x="1080" y="1434" class="stack-line">API client with async/await</text>
  <text x="1080" y="1464" class="stack-line">XcodeGen + Info.plist config</text>

  <rect x="100" y="1520" width="450" height="170" rx="16" fill="#f3f8ff" stroke="#c9daf5" stroke-width="2"/>
  <text x="130" y="1560" class="stack-head">Android App</text>
  <text x="130" y="1594" class="stack-line">Kotlin + Jetpack Compose + Material3</text>
  <text x="130" y="1624" class="stack-line">Coroutines + HttpURLConnection client</text>
  <text x="130" y="1654" class="stack-line">Gradle Kotlin DSL setup</text>

  <rect x="575" y="1520" width="450" height="170" rx="16" fill="#f3f8ff" stroke="#c9daf5" stroke-width="2"/>
  <text x="605" y="1560" class="stack-head">AI Providers</text>
  <text x="605" y="1594" class="stack-line">fal.ai adapter (queue lifecycle)</text>
  <text x="605" y="1624" class="stack-line">OpenAI image adapter (edit/generation)</text>
  <text x="605" y="1654" class="stack-line">Mock provider for testing/fallback</text>

  <rect x="1050" y="1520" width="450" height="170" rx="16" fill="#f3f8ff" stroke="#c9daf5" stroke-width="2"/>
  <text x="1080" y="1560" class="stack-head">Quality and Delivery</text>
  <text x="1080" y="1594" class="stack-line">GitHub Actions backend quality workflow</text>
  <text x="1080" y="1624" class="stack-line">make quality = tests + compile checks</text>
  <text x="1080" y="1654" class="stack-line">Environment-configured deployment</text>

  <!-- Section 3: Admin + Flow -->
  <rect x="60" y="1780" width="1480" height="470" rx="24" fill="url(#cardGrad)" stroke="#d6e2f5" stroke-width="2" filter="url(#shadow)"/>
  <text x="100" y="1845" class="section-title">3. Admin Panel Capabilities + Render Lifecycle</text>

  <!-- Admin modules -->
  <rect x="100" y="1880" width="670" height="310" rx="18" fill="#f8fcff" stroke="#d6e6fa" stroke-width="2"/>
  <text x="130" y="1922" class="stack-head">Admin Modules</text>

  <rect x="130" y="1950" width="290" height="42" rx="10" fill="#eaf2ff"/><text x="146" y="1978" class="module-text">API settings and health checks</text>
  <rect x="130" y="2002" width="290" height="42" rx="10" fill="#eaf2ff"/><text x="146" y="2030" class="module-text">Provider draft/publish/rollback</text>
  <rect x="130" y="2054" width="290" height="42" rx="10" fill="#eaf2ff"/><text x="146" y="2082" class="module-text">Version history and audit logs</text>
  <rect x="130" y="2106" width="290" height="42" rx="10" fill="#eaf2ff"/><text x="146" y="2134" class="module-text">Plans and variables CRUD</text>

  <rect x="450" y="1950" width="290" height="42" rx="10" fill="#e8fbf2"/><text x="466" y="1978" class="module-text">Provider health metrics</text>
  <rect x="450" y="2002" width="290" height="42" rx="10" fill="#e8fbf2"/><text x="466" y="2030" class="module-text">Activity/event log stream</text>
  <rect x="450" y="2054" width="290" height="42" rx="10" fill="#e8fbf2"/><text x="466" y="2082" class="module-text">Actor and reason tracking</text>
  <rect x="450" y="2106" width="290" height="42" rx="10" fill="#e8fbf2"/><text x="466" y="2134" class="module-text">No-backend-redeploy control</text>

  <!-- Flow -->
  <rect x="800" y="1880" width="700" height="310" rx="18" fill="#f8fcff" stroke="#d6e6fa" stroke-width="2"/>
  <text x="830" y="1922" class="stack-head">Render Flow (Mobile to Result)</text>

  <circle cx="860" cy="1998" r="24" fill="#2d6fbc"/><text x="860" y="2005" text-anchor="middle" class="flow-step">1</text>
  <text x="900" y="2004" class="flow-text">POST /v1/ai/render-jobs</text>

  <circle cx="860" cy="2052" r="24" fill="#2d6fbc"/><text x="860" y="2059" text-anchor="middle" class="flow-step">2</text>
  <text x="900" y="2058" class="flow-text">Backend validates auth, policy, and credits</text>

  <circle cx="860" cy="2106" r="24" fill="#2d6fbc"/><text x="860" y="2113" text-anchor="middle" class="flow-step">3</text>
  <text x="900" y="2112" class="flow-text">Provider router selects candidate model/provider</text>

  <circle cx="1230" cy="1998" r="24" fill="#15a66e"/><text x="1230" y="2005" text-anchor="middle" class="flow-step">4</text>
  <text x="1270" y="2004" class="flow-text">Dispatch to fal/openai/mock</text>

  <circle cx="1230" cy="2052" r="24" fill="#15a66e"/><text x="1230" y="2059" text-anchor="middle" class="flow-step">5</text>
  <text x="1270" y="2058" class="flow-text">Persist job and attempts in database</text>

  <circle cx="1230" cy="2106" r="24" fill="#15a66e"/><text x="1230" y="2113" text-anchor="middle" class="flow-step">6</text>
  <text x="1270" y="2112" class="flow-text">Poll status and return output URL</text>

  <line x1="864" y1="2025" x2="864" y2="2029" stroke="#4a678e" stroke-width="2"/>
  <line x1="864" y1="2079" x2="864" y2="2083" stroke="#4a678e" stroke-width="2"/>
  <line x1="1234" y1="2025" x2="1234" y2="2029" stroke="#4a678e" stroke-width="2"/>
  <line x1="1234" y1="2079" x2="1234" y2="2083" stroke="#4a678e" stroke-width="2"/>

  <line x1="1030" y1="1998" x2="1188" y2="1998" stroke="#4a678e" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="1030" y1="2052" x2="1188" y2="2052" stroke="#4a678e" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="1030" y1="2106" x2="1188" y2="2106" stroke="#4a678e" stroke-width="2.5" marker-end="url(#arrow)"/>

  <text x="800" y="2265" class="foot">Generated from repository architecture on 2026-02-07</text>
</svg>
